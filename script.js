/* -------------------------
   Atlantik Nuts — script.js
      Menuler, dil, smooth scroll, animasyon
         ------------------------- */

         (() => {
           'use strict';

             /* ---------- Helpers ---------- */
               const $ = (sel, ctx = document) => ctx.querySelector(sel);
                 const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));

                   /* ---------- Smooth scroll for nav links ---------- */
                     function initNavScroll() {
                         const navLinks = $$('#navbar nav a, #navbar nav li');
                             navLinks.forEach(link => {
                                   link.addEventListener('click', (e) => {
                                           e.preventDefault();
                                                   // data-section or href
                                                           const target = link.dataset && link.dataset.section ? link.dataset.section : (link.getAttribute('href')||'').replace('#','');
                                                                   if (!target) return;
                                                                           const el = document.getElementById(target) || document.querySelector(`[name="${target}"]`);
                                                                                   if (el) {
                                                                                             const y = el.getBoundingClientRect().top + window.scrollY - 68; // header offset
                                                                                                       window.scrollTo({ top: y, behavior: 'smooth' });
                                                                                                               }
                                                                                                                     });
                                                                                                                         });
                                                                                                                           }

                                                                                                                             /* ---------- Simple mobile menu toggle (if you later add) ---------- */
                                                                                                                               function initMobileMenu() {
                                                                                                                                   // placeholder for mobile menu toggle if needed
                                                                                                                                     }

                                                                                                                                       /* ---------- Intersection animation for sections ---------- */
                                                                                                                                         function initSectionObserver() {
                                                                                                                                             const io = new IntersectionObserver(entries => {
                                                                                                                                                   entries.forEach(ent => {
                                                                                                                                                           if (ent.isIntersecting) {
                                                                                                                                                                     ent.target.classList.add('fade-in');
                                                                                                                                                                               io.unobserve(ent.target);
                                                                                                                                                                                       }
                                                                                                                                                                                             });
                                                                                                                                                                                                 }, { threshold: 0.12 });

                                                                                                                                                                                                     $$('.section, .page-section, .card, .hero-content').forEach(el => io.observe(el));
                                                                                                                                                                                                       }

                                                                                                                                                                                                         /* ---------- Lazy-load images (add loading attr if not present) ---------- */
                                                                                                                                                                                                           function initLazyImages() {
                                                                                                                                                                                                               $$('img').forEach(img => {
                                                                                                                                                                                                                     if (!img.hasAttribute('loading')) {
                                                                                                                                                                                                                             img.setAttribute('loading', 'lazy');
                                                                                                                                                                                                                                   }
                                                                                                                                                                                                                                         // small: if uses raw github URLs, set appropriate alt if missing
                                                                                                                                                                                                                                               if (!img.alt) {
                                                                                                                                                                                                                                                       img.alt = 'Atlantik Nuts görsel';
                                                                                                                                                                                                                                                             }
                                                                                                                                                                                                                                                                 });
                                                                                                                                                                                                                                                                   }

                                                                                                                                                                                                                                                                     /* ---------- Language translations (simple client-side) ---------- */
                                                                                                                                                                                                                                                                       // Add translations here. Keys must match data-lang attributes in HTML.
                                                                                                                                                                                                                                                                         const translations = {
                                                                                                                                                                                                                                                                             tr: {
                                                                                                                                                                                                                                                                                   hero_title: 'Doğadan Sofranıza',
                                                                                                                                                                                                                                                                                         hero_sub: 'Atlantik Nuts – Global Kalite Standartlarında Üretim',
                                                                                                                                                                                                                                                                                               hero_button: 'Ürünleri İncele',
                                                                                                                                                                                                                                                                                                     about_hero_title: 'Hakkımızda',
                                                                                                                                                                                                                                                                                                           about_hero_sub: 'Atlantik Nuts — Kalite, güven ve sürdürülebilirlik odaklı üretim.',
                                                                                                                                                                                                                                                                                                                 mission_title: 'Misyonumuz',
                                                                                                                                                                                                                                                                                                                       mission_text: 'Yüksek hijyen standartlarında, sürdürülebilir yöntemlerle dünya pazarına premium kuruyemiş ürünleri sunmak.',
                                                                                                                                                                                                                                                                                                                             vision_title: 'Vizyonumuz',
                                                                                                                                                                                                                                                                                                                                   vision_text: 'Global pazarda marka değeri ve güvenilirlik açısından lider olmak; inovasyon ve kalite ile fark yaratmak.',
                                                                                                                                                                                                                                                                                                                                         values_title: 'Değerlerimiz',
                                                                                                                                                                                                                                                                                                                                               values_list: '',
                                                                                                                                                                                                                                                                                                                                                     factory_title: 'Fabrika & Üretim',
                                                                                                                                                                                                                                                                                                                                                           cta_title: 'Teklif almak ister misiniz?',
                                                                                                                                                                                                                                                                                                                                                                 cta_text: 'Bize ulaşın; ihtiyacınıza göre hızlı teklif hazırlayalım.',
                                                                                                                                                                                                                                                                                                                                                                       cta_button: 'İletişim'
                                                                                                                                                                                                                                                                                                                                                                           },
                                                                                                                                                                                                                                                                                                                                                                               en: {
                                                                                                                                                                                                                                                                                                                                                                                     hero_title: 'From Nature to Your Table',
                                                                                                                                                                                                                                                                                                                                                                                           hero_sub: 'Atlantik Nuts – Premium production with global quality standards',
                                                                                                                                                                                                                                                                                                                                                                                                 hero_button: 'Explore Products',
                                                                                                                                                                                                                                                                                                                                                                                                       about_hero_title: 'About Us',
                                                                                                                                                                                                                                                                                                                                                                                                             about_hero_sub: 'Atlantik Nuts — Production focused on quality, safety and sustainability.',
                                                                                                                                                                                                                                                                                                                                                                                                                   mission_title: 'Our Mission',
                                                                                                                                                                                                                                                                                                                                                                                                                         mission_text: 'Provide premium nuts and food products to global markets with sustainable methods and strict hygiene.',
                                                                                                                                                                                                                                                                                                                                                                                                                               vision_title: 'Our Vision',
                                                                                                                                                                                                                                                                                                                                                                                                                                     vision_text: 'Become a global leader in brand value and reliability; innovate with quality.',
                                                                                                                                                                                                                                                                                                                                                                                                                                           values_title: 'Our Values',
                                                                                                                                                                                                                                                                                                                                                                                                                                                 values_list: '',
                                                                                                                                                                                                                                                                                                                                                                                                                                                       factory_title: 'Factory & Production',
                                                                                                                                                                                                                                                                                                                                                                                                                                                             cta_title: 'Request a Quote',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                   cta_text: 'Contact us and we will prepare a fast quote for your needs.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                         cta_button: 'Contact'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                             },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 es: {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       hero_title: 'De la Naturaleza a tu Mesa',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             hero_sub: 'Atlantik Nuts – Producción premium con estándares de calidad global',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   hero_button: 'Ver Productos',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         about_hero_title: 'Sobre Nosotros',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               about_hero_sub: 'Atlantik Nuts — Producción centrada en calidad, seguridad y sostenibilidad.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     mission_title: 'Nuestra Misión',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           mission_text: 'Proveer productos premium a mercados globales con métodos sostenibles y alta higiene.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 vision_title: 'Nuestra Visión',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       vision_text: 'Ser líderes globales en valor de marca y confiabilidad; innovar con calidad.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             values_title: 'Nuestros Valores',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   values_list: '',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         factory_title: 'Fábrica y Producción',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               cta_title: 'Solicitar Presupuesto',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     cta_text: 'Contáctenos y prepararemos una cotización rápida para sus necesidades.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           cta_button: 'Contacto'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ar: {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         hero_title: 'من الطبيعة إلى مائدتك',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               hero_sub: 'Atlantik Nuts – إنتاج عالي الجودة وفق معايير عالمية',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     hero_button: 'عرض المنتجات',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           about_hero_title: 'من نحن',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 about_hero_sub: 'Atlantik Nuts — إنتاج يركز على الجودة والأمان والاستدامة.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       mission_title: 'مهمتنا',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             mission_text: 'تقديم منتجات فاخرة للأسواق العالمية بطرق مستدامة ومعايير نظافة صارمة.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   vision_title: 'رؤيتنا',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         vision_text: 'أن نكون روادًا عالميًا في قيمة العلامة التجارية والموثوقية؛ الابتكار بالجودة.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               values_title: 'قيمنا',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     values_list: '',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           factory_title: 'المصنع والإنتاج',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 cta_title: 'اطلب عرض سعر',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       cta_text: 'اتصل بنا وسنجهز عرضًا سريعًا لاحتياجاتك.',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             cta_button: 'اتصل'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     function applyTranslations(lang = 'tr') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         // find all elements with data-lang or data-i18n attributes
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             $$('[data-lang]').forEach(el => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const key = el.getAttribute('data-lang');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         if (!key) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               const txt = translations[lang] && translations[lang][key] ? translations[lang][key] : '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if (el.tagName.toLowerCase() === 'input' || el.tagName.toLowerCase() === 'textarea') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             el.placeholder = txt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           el.textContent = txt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         // Also convert data-i18n (backwards compatibility)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             $$('[data-i18n]').forEach(el => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const key = el.getAttribute('data-i18n');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const txt = translations[lang] && translations[lang][key] ? translations[lang][key] : el.textContent;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               el.textContent = txt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       // set dir for RTL languages
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           if (lang === 'ar') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 document.documentElement.setAttribute('dir','rtl');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       document.body.style.direction = 'rtl';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 document.documentElement.setAttribute('dir','ltr');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       document.body.style.direction = 'ltr';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               // remember choice
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   try { localStorage.setItem('site_lang', lang); } catch(e){}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       function initLangSwitcher() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           const select = document.getElementById('langSelect') || document.getElementById('langSelector');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               if (!select) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   // load saved language
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       const saved = localStorage.getItem('site_lang') || 'tr';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           select.value = saved;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               applyTranslations(saved);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   select.addEventListener('change', (e) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const v = e.target.value;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               applyTranslations(v);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     // small UX: scroll to top on language change
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           window.scrollTo({ top: 0, behavior: 'smooth' });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /* ---------- Hero parallax minor movement on mouse move ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     function initHeroParallax() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const hero = document.querySelector('.hero');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             const bg = document.querySelector('.hero-bg');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 if (!hero || !bg) return;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     hero.addEventListener('mousemove', (ev) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           const rect = hero.getBoundingClientRect();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 const cx = rect.left + rect.width/2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       const cy = rect.top + rect.height/2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             const dx = (ev.clientX - cx) / rect.width;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const dy = (ev.clientY - cy) / rect.height;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         // subtle translate
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               const tx = dx * 6;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     const ty = dy * 6;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           bg.style.transform = `scale(1.03) translate(${tx}px, ${ty}px)`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   hero.addEventListener('mouseleave', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         bg.style.transform = 'scale(1.02) translate(0,0)';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 /* ---------- Init on DOM ready ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   document.addEventListener('DOMContentLoaded', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       initNavScroll();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           initMobileMenu();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               initSectionObserver();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   initLazyImages();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       initLangSwitcher();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           initHeroParallax();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               // set dynamic year in footer if present
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const yEl = document.getElementById('year');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       if (yEl) yEl.textContent = new Date().getFullYear();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         })();