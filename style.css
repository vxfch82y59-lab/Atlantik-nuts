/* assets/js/script.js
   Minimal, secure, performant:
      - Offcanvas (hamburger) accessible
         - Hero slider (fade)
            - SPA-like section switch
               - Lazy load of data-src backgrounds for circles/hero-circle
                  - i18n simple client-side
                  */

                  (() => {
                    'use strict';

                      /* ---------- helpers ---------- */
                        const $ = (s, ctx = document) => ctx.querySelector(s);
                          const $$ = (s, ctx = document) => Array.from((ctx || document).querySelectorAll(s));

                            /* ---------- elements ---------- */
                              const hambtn = $('#hambtn');
                                const offcanvas = $('#offcanvasMenu');
                                  const offLinks = $$('.off-link');
                                    const langBtns = $$('.lang-btn');
                                      const pages = $$('.page');
                                        const yearEl = $('#year') || document.createElement('span');

                                          if (yearEl) yearEl.textContent = new Date().getFullYear();

                                            /* ---------- i18n ---------- */
                                              const i18n = {
                                                  tr: {
                                                        nav_home: 'Ana Sayfa', nav_about: 'Hakkımızda', nav_products: 'Ürünler', nav_services: 'Hizmetler',
                                                              nav_projects: 'Projeler', nav_certificates: 'Sertifikalar', nav_contact: 'İletişim',
                                                                    hero_title: 'Doğadan Sofranıza', hero_sub: 'Atlantik Nuts — Global kalite standartlarında üretim',
                                                                          hero_btn_products: 'Ürünleri İncele', hero_btn_contact: 'Teklif Al',
                                                                                about_title: 'Hakkımızda', about_text: 'Atlantik Nuts, yüksek teknoloji ve sürdürülebilir yöntemlerle üretim yapan kurumsal bir firmadır.',
                                                                                      products_title: 'Ürünler', products_text: 'Premium kuruyemiş ürünleri — ihracata uygun paketlemeler.',
                                                                                            prod1_title: 'Kavrulmuş Fındık', prod2_title: 'Çiğ Fındık', prod3_title: 'Badem', prod4_title: 'Karışık Kuruyemiş',
                                                                                                  services_title: 'Hizmetler', svc1: 'Endüstriyel Üretim', svc2: 'Kalite Kontrol', svc3: 'Paketleme & İhracat',
                                                                                                        projects_title: 'Projeler', proj1: 'İşleme Hattı', proj2: 'Depolama',
                                                                                                              certs_title: 'Sertifikalar', certs_text: 'ISO, HACCP ve diğer kalite belgeleri',
                                                                                                                    contact_title: 'İletişim', contact_text: 'Adres, telefon ve iletişim formu.',
                                                                                                                          contact_address_label: 'Adres:', contact_address: 'Organize Sanayi Bölgesi, Fabrika No: 12, İstanbul',
                                                                                                                                contact_phone_label: 'Telefon:', contact_email_label: 'Email:'
                                                                                                                                    },
                                                                                                                                        en: {
                                                                                                                                              nav_home: 'Home', nav_about: 'About', nav_products: 'Products', nav_services: 'Services',
                                                                                                                                                    nav_projects: 'Projects', nav_certificates: 'Certificates', nav_contact: 'Contact',
                                                                                                                                                          hero_title: 'From Nature to Your Table', hero_sub: 'Atlantik Nuts — Premium production with global quality standards',
                                                                                                                                                                hero_btn_products: 'Explore Products', hero_btn_contact: 'Request Quote',
                                                                                                                                                                      about_title: 'About Us', about_text: 'Atlantik Nuts is a corporate company producing with high-tech and sustainable methods.',
                                                                                                                                                                            products_title: 'Products', products_text: 'Premium nuts — packaging ready for export.',
                                                                                                                                                                                  prod1_title: 'Roasted Hazelnut', prod2_title: 'Raw Hazelnut', prod3_title: 'Almond', prod4_title: 'Mixed Nuts',
                                                                                                                                                                                        services_title: 'Services', svc1: 'Industrial Production', svc2: 'Quality Control', svc3: 'Packaging & Export',
                                                                                                                                                                                              projects_title: 'Projects', proj1: 'Processing Line', proj2: 'Storage',
                                                                                                                                                                                                    certs_title: 'Certificates', certs_text: 'ISO, HACCP and other quality documents',
                                                                                                                                                                                                          contact_title: 'Contact', contact_text: 'Address, phone and contact form.',
                                                                                                                                                                                                                contact_address_label: 'Address:', contact_address: 'Industrial Zone, Factory No: 12, Istanbul',
                                                                                                                                                                                                                      contact_phone_label: 'Phone:', contact_email_label: 'Email:'
                                                                                                                                                                                                                          },
                                                                                                                                                                                                                              es: {
                                                                                                                                                                                                                                    nav_home: 'Home', nav_about: 'About', nav_products: 'Products', nav_services: 'Services',
                                                                                                                                                                                                                                          nav_projects: 'Projects', nav_certificates: 'Certificates', nav_contact: 'Contact',
                                                                                                                                                                                                                                                hero_title: 'De la Naturaleza a tu Mesa', hero_sub: 'Atlantik Nuts — Producción premium con estándares globales',
                                                                                                                                                                                                                                                      hero_btn_products: 'Ver Productos', hero_btn_contact: 'Solicitar Cotización',
                                                                                                                                                                                                                                                            about_title: 'Sobre Nosotros', about_text: 'Atlantik Nuts es una empresa que produce con métodos sostenibles y alta tecnología.',
                                                                                                                                                                                                                                                                  products_title: 'Productos', products_text: 'Productos premium — embalaje listo para exportación.',
                                                                                                                                                                                                                                                                        prod1_title: 'Avellana Tostada', prod2_title: 'Avellana Cruda', prod3_title: 'Almendra', prod4_title: 'Frutos Secos Mixtos',
                                                                                                                                                                                                                                                                              services_title: 'Servicios', svc1: 'Producción Industrial', svc2: 'Control de Calidad', svc3: 'Envasado y Exportación',
                                                                                                                                                                                                                                                                                    projects_title: 'Proyectos', proj1: 'Línea de Procesamiento', proj2: 'Almacenamiento',
                                                                                                                                                                                                                                                                                          certs_title: 'Certificados', certs_text: 'ISO, HACCP y otros documentos de calidad',
                                                                                                                                                                                                                                                                                                contact_title: 'Contacto', contact_text: 'Dirección, teléfono y formulario de contacto.',
                                                                                                                                                                                                                                                                                                      contact_address_label: 'Dirección:', contact_address: 'Zona Industrial, Fábrica No:12, Estambul',
                                                                                                                                                                                                                                                                                                            contact_phone_label: 'Teléfono:', contact_email_label: 'Correo:'
                                                                                                                                                                                                                                                                                                                },
                                                                                                                                                                                                                                                                                                                    ar: {
                                                                                                                                                                                                                                                                                                                          nav_home: 'الرئيسية', nav_about: 'من نحن', nav_products: 'المنتجات', nav_services: 'الخدمات',
                                                                                                                                                                                                                                                                                                                                nav_projects: 'المشاريع', nav_certificates: 'الشهادات', nav_contact: 'اتصل بنا',
                                                                                                                                                                                                                                                                                                                                      hero_title: 'من الطبيعة إلى مائدتك', hero_sub: 'Atlantik Nuts — إنتاج عالي الجودة وفق معايير عالمية',
                                                                                                                                                                                                                                                                                                                                            hero_btn_products: 'عرض المنتجات', hero_btn_contact: 'طلب عرض سعر',
                                                                                                                                                                                                                                                                                                                                                  about_title: 'من نحن', about_text: 'شركة Atlantik Nuts تنتج بأساليب مستدامة وتكنولوجيا عالية.',
                                                                                                                                                                                                                                                                                                                                                        products_title: 'المنتجات', products_text: 'منتجات فاخرة — تغليف جاهز للتصدير.',
                                                                                                                                                                                                                                                                                                                                                              prod1_title: 'بندق محمص', prod2_title: 'بندق خام', prod3_title: 'لوز', prod4_title: 'مكسرات مشكلة',
                                                                                                                                                                                                                                                                                                                                                                    services_title: 'الخدمات', svc1: 'الإنتاج الصناعي', svc2: 'مراقبة الجودة', svc3: 'التعبئة والتصدير',
                                                                                                                                                                                                                                                                                                                                                                          projects_title: 'المشاريع', proj1: 'خط المعالجة', proj2: 'التخزين',
                                                                                                                                                                                                                                                                                                                                                                                certs_title: 'الشهادات', certs_text: 'ISO وHACCP وغيرها من مستندات الجودة',
                                                                                                                                                                                                                                                                                                                                                                                      contact_title: 'اتصل بنا', contact_text: 'العنوان والهاتف ونموذج الاتصال.',
                                                                                                                                                                                                                                                                                                                                                                                            contact_address_label: 'العنوان:', contact_address: 'المنطقة الصناعية، المصنع رقم 12، إسطنبول',
                                                                                                                                                                                                                                                                                                                                                                                                  contact_phone_label: 'الهاتف:', contact_email_label: 'البريد:'
                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                        };

                                                                                                                                                                                                                                                                                                                                                                                                          // default language
                                                                                                                                                                                                                                                                                                                                                                                                            let currentLang = localStorage.getItem('site_lang') || 'tr';

                                                                                                                                                                                                                                                                                                                                                                                                              function applyTranslations(lang) {
                                                                                                                                                                                                                                                                                                                                                                                                                  if (!i18n[lang]) lang = 'tr';
                                                                                                                                                                                                                                                                                                                                                                                                                      // find all elements with data-i18n
                                                                                                                                                                                                                                                                                                                                                                                                                          $$('[data-i18n]').forEach(el => {
                                                                                                                                                                                                                                                                                                                                                                                                                                const key = el.getAttribute('data-i18n');
                                                                                                                                                                                                                                                                                                                                                                                                                                      if (!key) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                            const txt = i18n[lang][key];
                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (typeof txt === 'undefined') return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                        // place text safely
                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (el.tagName.toLowerCase() === 'input' || el.tagName.toLowerCase() === 'textarea') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      el.placeholder = txt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    el.textContent = txt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // direction for Arabic
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (lang === 'ar') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.documentElement.setAttribute('dir', 'rtl');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  document.body.style.direction = 'rtl';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.documentElement.setAttribute('dir', 'ltr');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  document.body.style.direction = 'ltr';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          localStorage.setItem('site_lang', lang);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              currentLang = lang;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /* ---------- offcanvas (hamburger) ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    function toggleOffcanvas(open) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (!offcanvas) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (typeof open === 'undefined') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  open = !offcanvas.classList.contains('open');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (open) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                offcanvas.classList.add('open');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      offcanvas.setAttribute('aria-hidden', 'false');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            hambtn.setAttribute('aria-expanded', 'true');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // disable body scroll
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        document.documentElement.style.overflow = 'hidden';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              document.body.style.touchAction = 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // set focus to first link
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const first = offcanvas.querySelector('.off-link, .lang-btn');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (first) first.focus();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          offcanvas.classList.remove('open');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                offcanvas.setAttribute('aria-hidden', 'true');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      hambtn.setAttribute('aria-expanded', 'false');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.documentElement.style.overflow = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  document.body.style.touchAction = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        hambtn.focus();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                hambtn && hambtn.addEventListener('click', () => toggleOffcanvas());

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // close on ESC
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    window.addEventListener('keydown', (e) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (e.key === 'Escape' && offcanvas && offcanvas.classList.contains('open')) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              toggleOffcanvas(false);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      // close when clicking outside (optional)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        window.addEventListener('click', (e) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (!offcanvas) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (offcanvas.classList.contains('open') && !offcanvas.contains(e.target) && e.target !== hambtn && !hambtn.contains(e.target)) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      toggleOffcanvas(false);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /* ---------- section switching (SPA-like) ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                function showSection(id) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    pages.forEach(p => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (p.id === id) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  p.classList.remove('page--hidden');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          p.classList.add('page--active', 'fade-in');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // lazy load images inside this section
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          loadImagesIn(p);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        p.classList.add('page--hidden');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                p.classList.remove('page--active', 'fade-in');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              // close offcanvas if open (mobile)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (offcanvas && offcanvas.classList.contains('open')) toggleOffcanvas(false);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      // update focus
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          window.scrollTo({top:0, behavior:'smooth'});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              // nav links
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                offLinks.forEach(link => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    link.addEventListener('click', (e) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          e.preventDefault();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const page = link.getAttribute('data-page');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (!page) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            showSection(page);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // hero CTA buttons
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      $$('.btn[data-target]').forEach(b => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b.addEventListener('click', (e) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const t = b.getAttribute('data-target');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (t) showSection(t);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /* ---------- hero slider ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (function hero() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const slides = $$('.hero-slide');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (!slides.length) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            let idx = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                function show(i) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      slides.forEach((s, si) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              s.classList.toggle('active', si === i);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            show(0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                setInterval(() => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      idx = (idx + 1) % slides.length;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            show(idx);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }, 5000);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  })();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /* ---------- lazy loading for elements with data-src ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function loadImagesIn(container) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (!container) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const imgs = container.querySelectorAll('[data-src]');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  imgs.forEach(el => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const src = el.getAttribute('data-src');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (!src) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const img = new Image();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          img.onload = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // if element is a div with background
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          el.style.backgroundImage = `url('${src}')`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  el.classList.add('loaded');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // if it's hero-circle add loaded class for animation
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (el.classList.contains('hero-circle')) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            el.classList.add('loaded');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                img.onerror = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // fallback: leave placeholder or set a safe placeholder
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                el.style.backgroundColor = '#ddd';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            img.src = src;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  el.removeAttribute('data-src');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // initial lazy for home hero-circle
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.addEventListener('DOMContentLoaded', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // set initial lang
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    applyTranslations(currentLang);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // load hero circle (so it appears after hero)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const heroCircle = document.querySelector('.hero-circle');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (heroCircle && heroCircle.dataset.src) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      loadImagesIn(document.querySelector('.hero-section') || document.body);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              // observe circles for on-scroll lazy load
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const obs = new IntersectionObserver((entries, o) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        entries.forEach(en => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (en.isIntersecting) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const el = en.target;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (el.dataset.src) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                loadImagesIn(el.parentElement || document);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    o.unobserve(el);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }, {threshold: 0.12});

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          $$('.circle, .prod-circle').forEach(c => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                c.classList.add('fade');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      obs.observe(c);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              // initial show home
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  showSection('home');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /* ---------- language switching ---------- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        langBtns.forEach(btn => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            btn.addEventListener('click', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const lang = btn.getAttribute('data-lang');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (!lang) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              applyTranslations(lang);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      // apply translations when opening offcanvas so menu labels update
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (offcanvas) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            offcanvas.addEventListener('transitionend', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // update menu text if needed
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        })();